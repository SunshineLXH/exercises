<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <body>

    	<script type="text/javascript">
    		//1.indexOf
    		var arr1 = ['apple', 'orange', 'pear'],
    			find = false,
    			index = -1;

    		for (var i = 0; i < arr1.length; i++) {
    			if (arr1[i] === 'pear') {
    				find = true;
    				index = i;
    			}
    		}

    		console.log(index);

    		//使用indexOf
    		console.log((arr1.indexOf('pear') != -1) ? arr1.indexOf('pear') : -1);

    		var arr2 = [
    			{"name": "apple", "count": 3},
    			{"name": "orange", "count": 5},
    			{"name": "pear", "count": 10}
    		];

    		var newArr1 = [];

    		for (var i = 0, l = arr2.length; i < l; i++) {
    			if (arr2[i].name === 'pear') {
    				newArr1.push(arr2[i]);
    			}
    		}

    		console.log(newArr1);

    		//使用filter
    		var newArr2 = arr2.filter(function(item) {
    			return item.name === 'pear';
    		});

    		console.log(newArr2);


    		//fibonacci函数
    		function fib(n) {
    			if (n === 1 || n === 2) {
    				return 1;
    			}
    			else {
    				return fib(n - 1) + fib(n - 2);
    			}
    		}

    		function sumFib(n) {
    			var sum = 0;
    			for (var i = 1; i <= n; i++) {
    				sum += fib(i);
    			}
    			return sum;
    		}

    		console.log(fib(5));


    		//3. forEach()
    		var arr3 = [1,2,3,4,5,6,7,8];
    		for (var i = 0, l = arr3.length; i < l; i++) {
    			console.log(arr3[i]);
    		}

    		//use forEach()
    		arr3.forEach(function(item, index) {
    			console.log(item);
    		});


    		//4. map()
    		var oldArr = [
    			{first_name: "colin", last_name: "Toh"},
    			{first_name: "Addy", last_name: "Osmani"},
    			{first_name: "Yehuda", last_name: "Katz"}
    		];

    		function getNewArr() {
    			var newArr = [];

    			for (var i = 0, l = oldArr.length; i < l; i++) {
    				var item = oldArr[i];
    				item.full_name = [item.first_name, item.last_name].join(" ");
    				newArr[i] = item;
    			}

    			return newArr;
    		}

    		console.log(getNewArr());

    		//use map()
    		function getNewArr1() {
    			return oldArr.map(function(item, index) {
    				item.full_name = [item.first_name, item.last_name].join(",");
    				return item;
    			});
    		}

    		console.log(getNewArr1());


    		//5. reduce()
    		var arr4 = ['apple', 'orange', 'apple', 'orange', 'pear', 'orange'];

    		function getWordCnt() {
    			var obj = {};

    			for (var i = 0, l = arr4.length; i < l; i++) {
    				var item = arr4[i];
    				obj[item] = (obj[item] + 1) || 1;
    			}

    			return obj;
    		}

    		console.log(getWordCnt());

    		//use reduce()
    		function getWordCnt1() {
    			return arr4.reduce(function(prev, next) {
    				prev[next] = (prev[next] + 1) || 1;
    				return prev;
    			}, {});
    		}

    		console.log(getWordCnt1());

    		var arr = ["apple","orange"];
    		 
    		function noPassValue(){
    		  return arr.reduce(function(prev,next){
    		    console.log("prev:",prev);
    		    console.log("next:",next);
    		     
    		    return prev + " " +next;
    		  });
    		}
    		function passValue(){
    		  return arr.reduce(function(prev,next){
    		    console.log("prev:",prev);
    		    console.log("next:",next);
    		     
    		    prev[next] = 1;
    		    return prev;
    		  },{});
    		}
    		 
    		console.log("No Additional parameter:",noPassValue());
    		console.log("----------------");
    		console.log("With {} as an additional parameter:",passValue());
    	</script>
    </body>
</html>